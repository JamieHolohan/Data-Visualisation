<! doctype html>
<html>

<head>
	<title> Data Visualisation Assignment </title>
	<meta charset="UTF-8">
	<script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>
	<script>
		// set the dimensions and margins of the graph
		var margin = {top: 20, right: 20, bottom: 50, left: 70},
			width = 1530 - margin.left - margin.right,
			height = 1510 - margin.top - margin.bottom;
			
		// parse the dates in the proper format
		var formatDate = d3.timeFormat("%m/%d/%Y %X");
		var parseDate = d3.timeParse("%m/%e/%y %X");
			
		// Chart 1: append the svg object to the body of the page
		// appends a 'group' element to 'svg'
		// moves the 'group' element to the top left margin
		var svg = d3.select("body")
						.append("svg")
							.attr("width", width + margin.left + margin.right)
							.attr("height", height + margin.top + margin.bottom)
						.append("g")
							.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		
		//Create Pattern for background Image
		svg.append("defs")
			.append("pattern")
			.attr("id", "bg")
			.attr('patternUnits', 'userSpaceOnUse')
			.attr("width" , 720)
			.attr("height" , 720)
			.append("image")
				.attr("width" , 720)
				.attr("height" , 720)
				.attr("xlink:href", "Images/MapLargeLabels.jpg");
				
		//Create Pattern for background Image
		svg.append("defs")
			.append("pattern")
			.attr("id", "bgwind")
			.attr('patternUnits', 'userSpaceOnUse')
			.attr("width" , 720)
			.attr("height" , 720)
			.append("image")
				.attr("width" , 720)
				.attr("height" , 720)
				.attr("xlink:href", "Images/MapWind.jpg");
			
		//Create Rect containing bacgound image
		svg.append("rect")
			.attr("id", "rect1")
			.attr("x", 0)
			.attr("y", 0)
			.attr("width" , 720)
			.attr("height" , 720)
			.attr("fill", "url(#bg)");
		
		//Create Rect containing bacgound image
		svg.append("rect")
			.attr("id", "rect2")
			.attr("x", 720)
			.attr("y", 0)
			.attr("width" , 720)
			.attr("height" , 720)
			.attr("fill", "url(#bgwind)");
		
		// Read Data from file in local repository
		d3.csv("Data/MeteorologicalData.csv", function (d) {
			return {
				Date1: formatDate(new Date(d['Date'])),
				WindDirection: +d["Wind Direction"],
				WindSpeed: +d["Wind Speed (m/s)"],
				Elevation: +d["Elevation (m)"]
			};
		}).then(function(data1) {
			d3.csv("Data/SensorData.csv", function (d) {
			return {
				Date2: formatDate(new Date(d['Date Time '])),
				Chemical: d["Chemical"],
				Monitor: +d["Monitor"],
				Reading: +d["Reading"]
			};
			}).then(function(data2) {
				console.log(data1);
				console.log(data2);
			
			
			});
			
		});
		
	</script>
</body>
</html>