<! doctype html>
<html>

<head>
	<title> Data Visualisation Assignment </title>
	<meta charset="UTF-8">
	<script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>
	<script>
		// set the dimensions and margins of the graph
		var margin = {top: 20, right: 20, bottom: 50, left: 70},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;
			
		// parse the dates in the proper format
		var formatDate = d3.timeFormat("%m/%d/%Y %X");
		var parseDate = d3.timeParse("%m/%e/%y %X");
			
		// Chart 1: append the svg object to the body of the page
		// appends a 'group' element to 'svg'
		// moves the 'group' element to the top left margin
		var svg = d3.select("body")
						.append("svg")
							.attr("width", width + margin.left + margin.right)
							.attr("height", height + margin.top + margin.bottom)
						.append("g")
							.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
							
		svg.append("defs")
			.append("pattern")
			.attr("id", "bg")
			.append("image")
			.attr("xlink:href", "Images/MapLargeLabels");
			
		svg.append("rect")
			.attr("fill", "url(#bg)");

							
		// Read Data from file in local repository
		/*d3.csv("Data/MeteorologicalData.csv", function (d) {
			return {
				Date: formatDate(new Date(d['Date'])),
				WindDirection: +d["Wind Direction"],
				WindSpeed: +d["Wind Speed (m/s)"],
				Elevation: +d["Elevation (m)"]
			};
		}).csv("Data/SensorData.csv", function (d) {
			return {
				Date: formatDate(new Date(d['Date Time'])),
				Chemical: +d["Chemical"],
				Monitor: +d["Monitor"],
				Reading: +d["Reading"]
			};
		}).then(function(data) {
			console.log(data);
			
			
		});*/
		
		// Read Data from file in local repository
		d3.csv("Data/MeteorologicalData.csv", function (d) {
			return {
				Date1: formatDate(new Date(d['Date'])),
				WindDirection: +d["Wind Direction"],
				WindSpeed: +d["Wind Speed (m/s)"],
				Elevation: +d["Elevation (m)"]
			};
		}).then(function(data1) {
			d3.csv("Data/SensorData.csv", function (d) {
			return {
				Date2: formatDate(new Date(d['Date Time '])),
				Chemical: d["Chemical"],
				Monitor: +d["Monitor"],
				Reading: +d["Reading"]
			};
			}).then(function(data2) {
				console.log(data1);
				console.log(data2);
			
			
			});
			
		});
		
	</script>
</body>
</html>